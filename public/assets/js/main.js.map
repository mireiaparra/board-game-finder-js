{"version":3,"sources":["0_globalVariables.js","1_search.js","2_fav.js","3_localStorage.js","4_resetBtn.js","main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\nconst allList = document.querySelector(\".js-allCharactersList\");\nconst favList = document.querySelector(\".js-favCharactersList\");\nconst favSection = document.querySelector(\".js-favSection\");\nconst searchBtn = document.querySelector(\".js-searchBtn\");\nconst searchInput = document.querySelector(\".js-searchInput\");\nconst container = document.querySelector(\".js-main\");\nconst logBtn = document.querySelector(\".js-LogBtn\");\n\nlet characters = [];\nlet favCharacters = [];\nlet favsLocal = JSON.parse(localStorage.getItem(\"favChars\"));\n","\"use strict\";\nfunction handleClickSearch(ev) {\n  ev.preventDefault();\n\n  //Filtrar objetos por nombre y estado según lo introducido en el input de búsqueda. Concatenar los resultados en un nuevo array\n  const searchCharactersName = characters.filter((eachCharacter) =>\n    eachCharacter.name.toLowerCase().includes(searchInput.value.toLowerCase())\n  );\n  const searchCharactersStatus = characters.filter((eachCharacter) =>\n    eachCharacter.status.toLowerCase().includes(searchInput.value.toLowerCase())\n  );\n\n  let filteredCharacters = searchCharactersName.concat(searchCharactersStatus);\n\n  //Pintar los resultados\n  allList.innerHTML = \"\";\n  paintCharacters(filteredCharacters, allList, \"allCharacters__list--article\");\n\n  //Estilizar los resultados según si son favoritos o no\n  const filteredChildrenLi = allList.children;\n  setEventClick(filteredChildrenLi);\n  for (let i = 0; i < filteredChildrenLi.length; i++) {\n    filteredChildrenLi[i].addEventListener(\"click\", handleClickFav);\n\n    //Article de cada elemento de la lista de filtrados\n    const eachFiltered = filteredChildrenLi[i].firstChild;\n\n    if (favCharacters !== null && favCharacters !== []) {\n    //Esto da el index del objeto de favoritos que tenga un id igual al del resultado de la búsqueda\n    const findSearchIndex = favCharacters.findIndex((eachChar) => eachChar.char_id == parseInt(eachFiltered.id));\n    \n    //Comprobar si el objeto de la búsqueda estaba en el array de favoritos o no\n    if (findSearchIndex !== -1) {\n        eachFiltered.classList.add(\"favsCharacters__list--article\");\n      } else {\n        eachFiltered.classList.add(\"allCharacters__list--article\");\n      }\n    }\n  }\n}\n\nsearchBtn.addEventListener(\"click\", handleClickSearch);\n","\"use strict\";\nfunction paintFav(ev) {\n  //Esto da el article padre del elemento sobre el que se haya hecho click\n  let favElement = ev.target.parentElement;\n  favElement.classList.add(\"favsCharacters__list--article\");\n\n  //Encontrar el objeto que tenga el mismo id que el article sobre el que se ha hecho click\n  const findFav = characters.find((eachChar) => eachChar.char_id == parseInt(favElement.id));\n\n  //Encontrar la posición del objeto en el que he hecho click en el array de favoritos\n  const isFavIndex = favCharacters.findIndex((eachFav) => eachFav.char_id == parseInt(favElement.id));\n\n  //Comprobar si el objeto NO estaba en el array y añadirlo o quitarlo si SÍ estaba\n  if (isFavIndex === -1) {\n    favCharacters.push(findFav);\n  } else {\n    favCharacters.splice(isFavIndex, 1);\n    favElement.classList.remove(\"favsCharacters__list--article\");\n  }\n  updateFavList();\n}\n\nfunction updateFavList() {\n  favList.innerHTML = \"\";\n  //Ocultar la sección de favoritos si está vacía y vaciar LS\n  if (favCharacters.length === 0 || favCharacters === null) {\n    favSection.classList.add(\"hidden\");\n    favSection.classList.remove(\"favsCharacters\");\n    container.classList.remove(\"main\");\n    removeLocalSt();\n  \n  //Mostrar y estilizar la sección de favoritos si NO está vacía y guardar en LS\n  } else {\n    favSection.classList.remove(\"hidden\");\n    favSection.classList.add(\"favsCharacters\");\n    paintCharacters(favCharacters, favList, \"favsCharacters__list--articleBtn\");\n    styleFav();\n    setLocalSt();\n  }\n}\n\nfunction styleFav() {\n  container.classList.add(\"main\");\n  const favArticles = document.querySelectorAll(\".favsCharacters__list--articleBtn\");\n  //Localizar cada article de la lista de favoritos para añadirle una X\n  for (const favArticle of favArticles) {\n    const removeFavBtn = document.createElement(\"p\");\n    removeFavBtn.classList.add(\"removeFav\");\n    removeFavBtn.addEventListener(\"click\", handleClickRemove);\n    const removeFavText = document.createTextNode(\"X\");\n    removeFavBtn.appendChild(removeFavText);\n    favArticle.appendChild(removeFavBtn);\n  }\n}\n\nfunction handleClickRemove(ev) {\n  ev.preventDefault();\n  //Encontrar el article padre de la X en la que se hace click, encontrar el objeto con el mismo id de la lista de favoritos y eliminarlo\n  const isFavIndex = favCharacters.findIndex((eachFav) => eachFav.char_id == parseInt(ev.target.parentElement.id));\n  favCharacters.splice(isFavIndex, 1);\n\n  //Encontrar el article padre de la X en la que se hace click, encontrar el article con el mismo id en la lista general y cambiarle el estilo\n  const allLi = allList.children;\n  const allLiArr = Array.prototype.slice.call(allLi);\n\n  const oldFavCharacterLi = allLiArr.find((eachLi) => eachLi.firstChild.id == parseInt(ev.target.parentElement.id));\n  oldFavCharacterLi.firstChild.classList.remove(\"favsCharacters__list--article\");\n\n  updateFavList();\n}\n\nfunction handleClickFav(ev) {\n  ev.preventDefault();\n  paintFav(ev);\n}\n\nlogBtn.addEventListener('click', (ev) => {\n  ev.preventDefault();\n  console.log(`Tienes ${favCharacters.length} favoritos`);\n});","\"use strict\";\nfunction setLocalSt() {\n  localStorage.setItem(\"favChars\", JSON.stringify(favCharacters));\n}\nfunction removeLocalSt() {\n  localStorage.removeItem(\"favChars\");\n}\n\nfunction paintLocalSt() {\n  //Mostrar elementos favoritos desde el LS si existe\n  if (favsLocal !== null && favsLocal !== []) {\n    favSection.classList.remove(\"hidden\");\n    favSection.classList.add(\"favsCharacters\");\n    favCharacters = favsLocal;\n    paintCharacters(favsLocal, favList, \"favsCharacters__list--articleBtn\");\n    styleFav();\n\n    const allCharactersLi = allList.children;\n\n    //Recorrer cada article de la lista general\n    for (let i = 0; i < allCharactersLi.length; i++) {\n      const eachArticle = allCharactersLi[i].firstChild;\n    //Encontrar la posición de los objetos de favoritos que tengan un id igual a los articles de la lista general\n      const findArticleIndex = favCharacters.findIndex((eachChar) => eachChar.char_id == parseInt(eachArticle.id));\n\n      //Comprobar si el objeto está en el array de favoritos\n      if (findArticleIndex !== -1) {\n        eachArticle.classList.add(\"favsCharacters__list--article\");\n      } \n    }\n  }\n}\n","\"use strict\";\nfunction createReset() {\n  const resetBtn = document.createElement(\"button\");\n  const resetText = document.createTextNode(\"Delete All\");\n  resetBtn.appendChild(resetText);\n  resetBtn.classList.add(\"favsCharacters__reset\");\n  favSection.appendChild(resetBtn);\n  resetBtn.addEventListener(\"click\", handleClickReset);\n}\n\nfunction handleClickReset() {\n  favCharacters = [];\n  favList.innerHTML = \"\";\n  favSection.classList.add(\"hidden\");\n  favSection.classList.remove(\"favsCharacters\");\n  container.classList.remove(\"main\");\n  removeLocalSt();\n\n  //Eliminar la clase de favoritos de cada article de la lista general\n  for (const eachLi of allList.children) {\n    eachLi.firstChild.classList.remove(\"favsCharacters__list--article\");\n  }\n}\n","\"use strict\";\n\n//Función base para pintar los elementos de las listas con DOM avanzado\nfunction paintCharacters(charactersData, list, className) {\n  for (let i = 0; i < charactersData.length; i++) {\n    const liElement = document.createElement(\"li\");\n    const articleElement = document.createElement(\"article\");\n    articleElement.classList.add(className);\n    articleElement.setAttribute(\"id\", `${charactersData[i].char_id}`);\n\n    const imgElement = document.createElement(\"img\");\n    imgElement.src = `${charactersData[i].img}`;\n    imgElement.alt = `Photo of ${charactersData[i].name}`;\n    imgElement.style.height = \"150px\";\n    imgElement.style.width = \"120px\";\n    articleElement.appendChild(imgElement);\n\n    const titleElement = document.createElement(\"h2\");\n    articleElement.appendChild(titleElement);\n    const textElement = document.createElement(\"p\");\n    articleElement.appendChild(textElement);\n\n    liElement.appendChild(articleElement);\n    list.appendChild(liElement);\n\n    const nameText = document.createTextNode(`${charactersData[i].name}`);\n    titleElement.appendChild(nameText);\n\n    const statusText = document.createTextNode(`${charactersData[i].status}`);\n    textElement.appendChild(statusText);\n\n    const chAppArr = charactersData[i].appearance;\n    const chApp = chAppArr.join(\",\");\n\n \n\n    const ulApp = document.createElement(\"ul\");\n    const pApp = document.createElement(\"p\");\n\n    const pAppText = document.createTextNode(chApp);\n    pApp.appendChild(pAppText);\n    ulApp.appendChild(pApp);\n\n    articleElement.appendChild(ulApp);\n\n      if (chAppArr.length === 5) {\n      const allSeasons = document.createElement(\"p\");\n      const allSeasonsText = document.createTextNode(\"Es un súperpersonaje\")\n      allSeasons.appendChild(allSeasonsText);\n      articleElement.appendChild(allSeasons);\n    }\n  }\n}\n\n//Obtener los personajes de la API\nfunction getCharacters() {\n  fetch(\"./assets/data/characters.json\")\n    .then((response) => response.json())\n    .then((data) => {\n      characters = data;\n      paintCharacters(data, allList, \"allCharacters__list--article\");\n      const allListChildren = allList.children;\n      setEventClick(allListChildren)\n      paintLocalSt();\n    });\n}\n\nfunction setEventClick(list){\n  for (let i = 0; i < list.length; i++) {\n    list[i].addEventListener(\"click\", handleClickFav);\n  }\n}\n\n// Al cargar la página\ngetCharacters();\ncreateReset();"]}